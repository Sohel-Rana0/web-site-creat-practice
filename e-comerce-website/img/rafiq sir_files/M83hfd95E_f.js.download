;/*FB_PKG_DELIM*/

__d("MAWThemeConstant",[],(function(a,b,c,d,e,f){"use strict";a=[603383,3212336517];f.secureTheme=a}),66);
__d("MAWCreateOptimisticSecureThread.bs",["LS.bs","LSAuthorityLevel.bs","LSBitOffset.bs","LSGroupParticipantJoinState.bs","LSMailboxType.bs","LSNullstateDescriptionType.bs","LSRtcCallState.bs","LSVerifyE2EEMetadataThreadExistsV2","LsSystemFolder.bs","MAWGating","MAWThemeConstant","MAWThreadDefaults.bs","MAWTimeUtils.bs","MessagingThreadType.bs","MessengerJoinableModeType.bs","OfflineThreadingId.bs","Promise","ReQLTable.bs","bs_caml_format","bs_caml_int64","bs_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return c("LSVerifyE2EEMetadataThreadExistsV2")(b,void 0,d("LSAuthorityLevel.bs").optimistic,d("LS.bs").make(a)).then(function(b){var e=b[0];return d("ReQLTable.bs").update(a.table("threads"),{hd:e,tl:0},function(a){if(a===void 0)throw c("unrecoverableViolation")("Optimistic thread is missing","messenger_e2ee_web");return babelHelpers["extends"]({},a,{clientThreadKey:e})}).then(function(){return e})})}function i(a,b){var e=c("bs_caml_format").caml_int64_of_string(d("OfflineThreadingId.bs").make());return a.table("threads").add({additionalThreadContext:void 0,authorityLevel:d("LSAuthorityLevel.bs").optimistic,avatarStickerId:void 0,avatarStickerInstructionKeyId:void 0,avatarStickerOriginalImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerThumbnailImageUrl:void 0,cannotReplyReason:void 0,cannotUnsendReason:void 0,capabilities:d("MAWThreadDefaults.bs").defaultThreadCapabilities,capabilities2:d("LSBitOffset.bs").empty,capabilities3:d("LSBitOffset.bs").empty,clientThreadKey:e,customEmoji:void 0,customEmojiImageUrl:void 0,disableComposerInput:!1,disappearingModeInitiator:void 0,disappearingThreadKey:void 0,draftMessage:void 0,eventEndTimestampMs:void 0,eventStartTimestampMs:void 0,folderName:"inbox",hasPendingInvitation:void 0,hasPersistentMenu:!1,igFolder:void 0,inviterId:void 0,isAdminSnippet:!1,isAllUnreadMessageMissedCallXma:void 0,isCustomThreadPicture:!1,isDisappearingMode:!1,lastActivityTimestampMs:c("bs_caml_int64").zero,lastMessageCtaId:void 0,lastMessageCtaTimestampMs:void 0,lastMessageCtaType:void 0,lastNonMissedCallXmaMessageTimestampMs:void 0,lastReadWatermarkTimestampMs:c("bs_caml_int64").zero,mailboxType:d("LSMailboxType.bs").messenger,memberCount:void 0,muteMentionExpireTimeMs:c("bs_caml_int64").zero,muteCallsExpireTimeMs:c("bs_caml_int64").zero,muteExpireTimeMs:c("bs_caml_int64").zero,needsAdminApprovalForNewParticipant:void 0,normalizedSearchTerms:void 0,nullstateDescriptionText1:d("MAWThreadDefaults.bs").nullstateDescriptionText1,nullstateDescriptionText2:void 0,nullstateDescriptionText3:void 0,nullstateDescriptionType1:d("LSNullstateDescriptionType.bs").default_,nullstateDescriptionType2:void 0,nullstateDescriptionType3:void 0,ongoingCallState:d("LSRtcCallState.bs").noOngoingCall,otidOfFirstMessage:void 0,outgoingBubbleColor:void 0,parentThreadKey:d("LsSystemFolder.bs").inbox,proactiveWarningDismissTime:void 0,removeWatermarkTimestampMs:c("bs_caml_int64").zero,shouldRoundThreadPicture:void 0,snippet:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,snippetHasEmoji:!1,snippetSenderContactId:void 0,snippetStringArgument1:void 0,snippetStringHash:void 0,syncGroup:void 0,takedownState:void 0,themeFbid:d("MAWGating").isOccamadillo()?void 0:d("MAWThemeConstant").secureTheme,threadDescription:void 0,threadInviteLink:void 0,threadInvitesEnabled:d("MessengerJoinableModeType.bs").private_,threadInvitesEnabledV2:d("MessengerJoinableModeType.bs").private_,threadKey:e,threadName:void 0,threadPictureUrl:void 0,threadPictureUrlExpirationTimestampMs:void 0,threadPictureUrlFallback:void 0,threadTags:void 0,threadType:b,unreadDisappearingMessageCount:c("bs_caml_int64").zero,unsendLimitMs:c("bs_caml_int64").zero,viewedPluginContext:void 0,viewedPluginKey:void 0}).then(function(){return a.table("messages_ranges_v2__generated").add({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:d("MAWTimeUtils.bs").maxTimestampMs,minMessageId:"",minTimestampMs:d("MAWTimeUtils.bs").minTimestampMs,threadKey:e})}).then(function(){return e})}function a(a,e,f){f=d("MAWGating").isOccamadillo()&&c("bs_int64").equal(f,d("MessagingThreadType.bs").secureMessageOverWaOneToOne)?h(a,f):i(a,f);return f.then(function(f){return b("Promise").all(e.map(function(b){return a.table("participants").add({authorityLevel:d("LSAuthorityLevel.bs").optimistic,contactId:b.id,deliveredWatermarkTimestampMs:c("bs_caml_int64").zero,groupParticipantJoinState:d("LSGroupParticipantJoinState.bs").member,isAdmin:void 0,isModerator:!1,isSuperAdmin:void 0,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:c("bs_caml_int64").zero,readWatermarkTimestampMs:c("bs_caml_int64").zero,subscribeSource:void 0,threadKey:f})})).then(function(){return f})})}g.createSecureOccamadilloOptimisticThread=h;g.createSecureOptimisticThread=i;g.call=a}),98);
__d("MWV2RedirectToLatestReadThread.bs",["LSSyncStatus.bs","LsSystemFolder.bs","MAWInitSyncComplete.bs","MAWSessionStorage","MWInboxURIState.bs","MWNavigation.bs","MWPIsThreadUnread.bs","MWPThreadsForThreadList.bs","MWThreadListSupportedThreadTypes.bs","MessagingThreadType.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","promiseDone","react","useCurrentRoute","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return c("useCurrentRoute")()}var i={contents:!1};function j(a){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),{hd:d("LsSystemFolder.bs").inbox,tl:0})).then(function(b){return d("ReQL.bs").first(d("ReQL.bs").filter(d("MWPThreadsForThreadList.bs").createIterable(a,d("LsSystemFolder.bs").inbox,b),function(a){if(!d("MWPIsThreadUnread.bs").isThreadUnread(a)&&c("bs_caml").i64_neq(a.threadType,d("MessagingThreadType.bs").folder))return d("MWThreadListSupportedThreadTypes.bs").supportedThreadTypes.findIndex(function(b){return c("bs_caml").i64_eq(a.threadType,b)})!==-1;else return!1}))})}function b(){var a=c("useReStore")(),b=c("useCurrentRoute")(),e=h.useRef(b.url),f=h.useRef(!1);h.useEffect(function(){e.current!==b.url&&(f.current=!0)},[b]);var g=d("MWNavigation.bs").useHook(),k=h.useCallback(function(){var b=d("MWInboxURIState.bs").getRouteTokens(e.current),h=d("MAWSessionStorage").getMostRecentSecureThreadKey(),k=b.length,l;if(k>=3)l=!1;else switch(k){case 0:l=!1;break;case 1:k=b[0];l=k===""?h===void 0:!1;break;case 2:k=b[1];switch(k){case"":case"t":l=h===void 0;break;default:l=!1}break}if(l&&!i.contents&&!f.current){i.contents=!0;c("promiseDone")(j(a).then(function(a){if(a!==void 0)return c("bs_curry")._2(g.openInbox,{clientThreadKey:a.clientThreadKey,threadKey:a.threadKey,threadType:a.threadType},"inboxInitialLoad")}));return}},[g,f,e,a]);h.useEffect(function(){var b={contents:function(){}};b.contents=d("ReQLSubscription.bs").subscribe(a,d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:d("MAWInitSyncComplete.bs").id,tl:0}),function(a){if(a===void 0)return;if(a.length!==1)return;a=a[0];if(c("bs_caml").i64_eq(a.syncStatus,d("LSSyncStatus.bs").complete)){c("bs_curry")._1(k);return c("bs_curry")._1(b.contents)}});return function(){return c("bs_curry")._1(b.contents)}},[a,e,k])}g.useCurrentRoute=a;g.useHook=b}),98);
__d("MWV2SecureThreadViewContainer.bs",["MAWVerifyExistingThreadExists.bs","MWInboxDetailNullState.bs","MWInboxThreadViewContexts.bs","MWLSThread.bs","MWSelectedThreadOptionsIdContext.bs","MWV2InboxDetailContainer.bs","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=c("useReStore")();h.useEffect(function(){c("promiseDone")(d("MAWVerifyExistingThreadExists.bs").call(b,a))},[b,JSON.stringify(a)])}function a(a){var b=a.isConversationSearchVisible,c=a.setIsConversationSearchVisible;a=a.threadKey;var e=d("MWLSThread.bs").useThread(a);i(a);if(e!==void 0)return h.jsx(d("MWInboxThreadViewContexts.bs").make,{thread:e,children:h.jsx(d("MWSelectedThreadOptionsIdContext.bs").make,{threadId:e.threadKey,children:h.jsx(d("MWV2InboxDetailContainer.bs").make,{isConversationSearchVisible:b,setIsConversationSearchVisible:c,thread:e})})});else return h.jsx(d("MWInboxDetailNullState.bs").make,{})}b=a;g.make=b}),98);
__d("MAWInboxInfoQuickActionsUnmuteButton.bs",["fbt","CometColumnItem.react","MDSCircleButton.react","MWInboxInfoQuickActionIcons","MWText.react","react","useMAWSecureThreadUpdateMuteSetting"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a=a.thread;var b=h._("__JHASH__vpk4cwy2c0D__JHASH__"),d=h._("__JHASH__xerGPrX4KDp__JHASH__"),e=c("useMAWSecureThreadUpdateMuteSetting")(a.threadKey,0);return i.jsxs(i.Fragment,{children:[i.jsx(c("CometColumnItem.react"),{children:i.jsx(c("MDSCircleButton.react"),{icon:c("MWInboxInfoQuickActionIcons").Unmute,label:b,onPress:function(){e()},size:36})}),i.jsx(c("CometColumnItem.react"),{paddingTop:8,children:i.jsx(c("MWText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:d})})]})}b=a;g.make=b}),98);
__d("MAWEndToEndEncryptionKeysSection.bs",["fbt","CometLazyDialogTrigger.react","JSResource","MAWInboxInfoButton.react","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","bs_curry","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a=a.thread;var b=h._("__JHASH__Q_jtIDJvnQe__JHASH__");return i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{thread:a},dialogResource:c("JSResource")("MAWEndToEndEncryptionKeysDialog.react").__setRef("MAWEndToEndEncryptionKeysSection.bs"),children:function(a){return i.jsx(c("MAWInboxInfoButton.react"),{addOnStart:i.jsx(c("MWIcon.react"),{icon:d("MWInboxInfoPrivacyAndSupportSectionIcons.bs").EndToEndEncryptionKeys.icon}),label:b,onPress:function(){return c("bs_curry")._1(a)},testid:void 0})}})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MAWInboxInfoPrivacyAndSupportSectionCreateSecureConversationMenuItem.bs",["fbt","MAWCreateOneToOneThread.bs","MAWInboxInfoButton.react","MAWThreadId.bs","MWIcon.react","MWNavigation.bs","MWThreadListHoverButtonDropdownMenuIcons","MessagingThreadType.bs","bs_caml_int64","bs_curry","bs_int64","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.contactId,e=d("MWNavigation.bs").useHook(),f=c("useReStore")();return i.jsx(c("MAWInboxInfoButton.react"),{addOnStart:i.jsx(c("MWIcon.react"),{icon:c("MWThreadListHoverButtonDropdownMenuIcons").SecretConversation}),label:h._("__JHASH__hitEjg-w7S3__JHASH__"),onPress:function(){c("promiseDone")(d("MAWCreateOneToOneThread.bs").call(f,b).then(function(a){var b=a.chatId;return d("MAWThreadId.bs").toThreadKeyMaybe(f,b).then(function(a){return[a,b]})}),function(a){var b=a[0];if(b!==void 0){c("gkx")("3552");return c("bs_curry")._3(e.openTabOrInbox,void 0,{clientThreadKey:c("bs_caml_int64").of_int32(a[1]),threadKey:b,threadType:d("MessagingThreadType.bs").secureMessageOverWaOneToOne},"inboxPrivacyAndInfoSection")}})},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MAWInboxInfoPrivacyAndSupportSectionUnmuteThreadButton.bs",["fbt","MAWInboxInfoButton.react","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","MessengerMuteUtils.bs","bs_caml","bs_caml_int64","react","useMAWSecureThreadUpdateMuteSetting"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a=a.thread;var b=c("useMAWSecureThreadUpdateMuteSetting")(a.threadKey,0),e=h._("__JHASH__kPTB9lKW1L9__JHASH__");a=d("MessengerMuteUtils.bs").mutedUntilLabel(c("bs_caml").i64_eq(a.muteExpireTimeMs,c("bs_caml_int64").neg_one)?-1:c("bs_caml_int64").to_float(a.muteExpireTimeMs)/1e3);a=a!==void 0?a:void 0;e={addOnStart:i.jsx(c("MWIcon.react"),{icon:d("MWInboxInfoPrivacyAndSupportSectionIcons.bs").Notifications.Off.icon}),label:e,onPress:function(){b()},testid:"mw_notifications_section_button"};a!==void 0&&(e.subLabel=a);return i.jsx(c("MAWInboxInfoButton.react"),babelHelpers["extends"]({},e))}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MWInboxInfoPhotos.bs",["fbt","MWCollapsible.react","MWInboxInfoPhotoGallery.bs","MWInboxPersistedUIState","bs_curry","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.getPreviewUrl,e=a.hasMore,f=a.isLoading,g=a.media,j=a.onLoadMore;a=a.navigateToRouteForMediaViewer;a=a!==void 0?a:!0;var k=d("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWInboxInfoSharedPhotosSection.isOpen__"),l=k[0],m=k[1];return g.length<=0?null:i.jsx(c("MWCollapsible.react"),{isOpen:l,label:h._("__JHASH__VO2FHJM_TGY__JHASH__"),onPress:function(){return c("bs_curry")._1(m,function(){return!l})},testid:void 0,children:i.jsx(d("MWInboxInfoPhotoGallery.bs").make,{getPreviewUrl:b,hasMore:e,isLoading:f,media:g,navigateToRouteForMediaViewer:a,onLoadMore:j})})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MAWEphemeralMessagesSettingsSectionButton.react",["fbt","CometLazyDialogTrigger.react","JSResourceForInteraction","MAWChatJid.bs","MAWInboxInfoButton.react","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","nux:49","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=b("nux:49")==null?void 0:b("nux:49")("www_armadillo_disappearing_messages_nux_dialog"),k=c("JSResourceForInteraction")("MAWEphemeralSettingsDialog.react").__setRef("MAWEphemeralMessagesSettingsSectionButton.react"),l=h._("__JHASH__LQDyKCJt3C1__JHASH__");function a(a){var b=d("MAWChatJid.bs").useThreadJidCallback(a.thread.threadKey),e=j?i.jsx(j,{getThreadJid:b,onDismiss:a.onDismiss,triggerLocation:a.triggerLocation}):null,f=i.jsx(c("MWIcon.react"),{icon:d("MWInboxInfoPrivacyAndSupportSectionIcons.bs").EphemeralMessages.icon});return e!=null?e:i.jsx(i.Fragment,{children:a.canUseEphemeralSetting?i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{getThreadJid:b},dialogResource:k,onHide:a.onDismiss,children:function(a){return i.jsx(c("MAWInboxInfoButton.react"),{addOnStart:f,label:l,onPress:function(b){return a()}})}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWLoadMoreThreadSharedAttachments.bs",["MAWBridgeSendAndReceive","MAWThreadId.bs","Promise","bs_caml_int64","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=[2328,1316134911];function a(a,e,f){var g=c("useReStore")(),j=e!==void 0&&e&&f!==void 0?f:i,k=a!==void 0?a.threadKey:void 0;return h.useCallback(function(){if(k!==void 0){c("promiseDone")(d("MAWThreadId.bs").ofThreadKey(g,k).then(function(a){return a.TAG===0?d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMedia",{minRowId:c("bs_caml_int64").to_int32(j),threadId:a._0}):b("Promise").resolve()}));return}},[g,k,j])}e=i;g.useHook=a;g.mAX_MESSAGING_TIMESTAMP=e}),98);
__d("MAWSecureInboxInfoSharedPhotosSection.bs",["MAWAttachmentThumbnail.bs","MAWLoadMoreThreadSharedAttachments.bs","MWInboxInfoPhotos.bs","MWSharedAttachmentsSectionHooks.bs","bs_belt_Option","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.thread;var b=d("MWSharedAttachmentsSectionHooks.bs").useQueryMediaAttachments(a),e=b[4],f=b[0],g=c("bs_belt_Option").getWithDefault(e,!0);e=d("MAWLoadMoreThreadSharedAttachments.bs").useHook(a,e,b[3]);b=d("MWSharedAttachmentsSectionHooks.bs").useLoader(f,g,b[2],e);e=h.useCallback(function(a){return d("MAWAttachmentThumbnail.bs").getThumbnailBlob(a)},[]);return h.jsx(d("MWInboxInfoPhotos.bs").make,{getPreviewUrl:e,hasMore:g,isLoading:b[0],media:f,navigateToRouteForMediaViewer:!1,onLoadMore:b[1],thread:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);